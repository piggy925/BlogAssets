---
title: Spring Boot Actuator ä½¿ç”¨è¯´æ˜
author: MuMu
categories: [Java Web]
---

### Spring Boot Actuatorç®€ä»‹

Spring Boot Actuator æ˜¯ Spring Boot æä¾›ç”¨äºå¯¹åº”ç”¨ç³»ç»Ÿè¿›è¡Œè‡ªçœå’Œç›‘æ§çš„åŠŸèƒ½æ¨¡å—ï¼ŒåŸºäºæ­¤å¼€å‘äººå‘˜å¯ä»¥æ–¹ä¾¿åœ°å¯¹åº”ç”¨ç³»ç»ŸæŸäº›ç›‘æ§æŒ‡æ ‡è¿›è¡ŒæŸ¥çœ‹ã€ç»Ÿè®¡ã€å®¡è®¡ã€æŒ‡æ ‡æ”¶é›†ç­‰ã€‚Actuatoræä¾›äº†åŸºäºHTTPç«¯ç‚¹æˆ–JMXæ¥ç®¡ç†å’Œç›‘è§†åº”ç”¨ç¨‹åºã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒSpring Boot Actuator æ˜¯ä¸€æ¬¾åº”ç”¨ç›‘æ§å·¥å…·ã€‚

### æ•´åˆ Spring Boot Actuator

1\. åœ¨pomä¸­å¼•å…¥ä¾èµ–

```xml
<dependency>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

2\. å¯åŠ¨ Spring Boot ç¨‹åº

æ§åˆ¶å°æ˜¾ç¤ºä¸‹é¢ä¿¡æ¯ğŸ‘‡ğŸ»ï¼š

![image-20220403193755493](https://blog.caowei.xyz/blog/image-20220403193755493.png)

è®¿é—®ï¼šhttp://localhost:8080/actuatorï¼Œè¾“å‡ºä¸‹é¢çš„ä¿¡æ¯ï¼š

```json
{
    "_links": {
        "self": {
            "href": "http://localhost:8080/actuator",
            "templated": false
        },
        "health-path": {
            "href": "http://localhost:8080/actuator/health/{*path}",
            "templated": true
        },
        "health": {
            "href": "http://localhost:8080/actuator/health",
            "templated": false
        }
    }
}
```

è¯¥åœ°å€æ˜¯ Spring Boot Actuator çš„å¯¼èˆªç«¯ç‚¹ï¼Œå¯ä»¥æ˜¾ç¤º Spring Boot Actuator çš„æ‰€æœ‰ç«¯ç‚¹ã€‚

3\. æ¿€æ´»æ˜¾ç¤ºæ‰€æœ‰ç«¯ç‚¹

é»˜è®¤æƒ…å†µä¸‹åªæ˜¾ç¤º health ç«¯ç‚¹ï¼Œåœ¨ application.properties é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

*æ³¨ï¼šSpring Boot Actuator çš„é…ç½®éƒ½æ˜¯ä»¥ management å¼€å¤´*

```properties
# æ¿€æ´»æ‰€æœ‰ç«¯ç‚¹
management.endpoints.web.exposure.include=*
# æ¿€æ´»æŒ‡å®šç«¯ç‚¹
management.endpoints.web.exposure.include=health,info
```

å³å¯æ¿€æ´»æ˜¾ç¤ºæ‰€æœ‰ç«¯ç‚¹ã€‚

```json
{
    "_links": {
        "self": {
            "href": "http://localhost:8080/actuator",
            "templated": false
        },
        "beans": {
            "href": "http://localhost:8080/actuator/beans",
            "templated": false
        },
        "caches-cache": {
            "href": "http://localhost:8080/actuator/caches/{cache}",
            "templated": true
        },
        "caches": {
            "href": "http://localhost:8080/actuator/caches",
            "templated": false
        },
        "health-path": {
            "href": "http://localhost:8080/actuator/health/{*path}",
            "templated": true
        },
        "health": {
            "href": "http://localhost:8080/actuator/health",
            "templated": false
        },
        "info": {
            "href": "http://localhost:8080/actuator/info",
            "templated": false
        },
        "conditions": {
            "href": "http://localhost:8080/actuator/conditions",
            "templated": false
        },
        "configprops-prefix": {
            "href": "http://localhost:8080/actuator/configprops/{prefix}",
            "templated": true
        },
        "configprops": {
            "href": "http://localhost:8080/actuator/configprops",
            "templated": false
        },
        "env": {
            "href": "http://localhost:8080/actuator/env",
            "templated": false
        },
        "env-toMatch": {
            "href": "http://localhost:8080/actuator/env/{toMatch}",
            "templated": true
        },
        "loggers": {
            "href": "http://localhost:8080/actuator/loggers",
            "templated": false
        },
        "loggers-name": {
            "href": "http://localhost:8080/actuator/loggers/{name}",
            "templated": true
        },
        "heapdump": {
            "href": "http://localhost:8080/actuator/heapdump",
            "templated": false
        },
        "threaddump": {
            "href": "http://localhost:8080/actuator/threaddump",
            "templated": false
        },
        "metrics": {
            "href": "http://localhost:8080/actuator/metrics",
            "templated": false
        },
        "metrics-requiredMetricName": {
            "href": "http://localhost:8080/actuator/metrics/{requiredMetricName}",
            "templated": true
        },
        "scheduledtasks": {
            "href": "http://localhost:8080/actuator/scheduledtasks",
            "templated": false
        },
        "mappings": {
            "href": "http://localhost:8080/actuator/mappings",
            "templated": false
        }
    }
}
```

4\. Spring Boot Actuator å¸¸ç”¨ç›‘æ§ç«¯ç‚¹

| ç«¯ç‚¹        | æè¿°                                                       |  HTTPæ–¹æ³•  |
| :---------- | :--------------------------------------------------------- | :--------: |
| conditions  | æ˜¾ç¤ºè‡ªåŠ¨é…ç½®çš„ä¿¡æ¯                                         |    GET     |
| beans       | æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ‰€æœ‰çš„ Spring Bean                       |    GET     |
| configprops | æ˜¾ç¤ºæ‰€æœ‰`@ConfigurationProperties`çš„é…ç½®å±æ€§åˆ—è¡¨           |    GET     |
| dump        | æ˜¾ç¤ºçº¿ç¨‹æ´»åŠ¨çš„å¿«ç…§                                         |    GET     |
| env         | æ˜¾ç¤ºç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç¯å¢ƒå˜é‡åŠåº”ç”¨ç¯å¢ƒå˜é‡               |    GET     |
| health      | æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„å¥åº·æŒ‡æ ‡                                     |    GET     |
| heapdump    | å †dump                                                     |    GET     |
| info        | æ˜¾ç¤ºåº”ç”¨çš„ä¿¡æ¯ï¼Œå¯ç”¨`info.*`å±æ€§è‡ªå®šä¹‰ info ç«¯ç‚¹å…¬å¼€çš„æ•°æ® |    GET     |
| loggers     | GETï¼šæ˜¾ç¤ºæ—¥å¿—çº§åˆ«ï¼ŒPOSTï¼šåŠ¨æ€ä¿®æ”¹æ—¥å¿—çº§åˆ«                  | GET / POST |
| mappings    | æ˜¾ç¤ºæ‰€æœ‰çš„URLè·¯å¾„                                          |    GET     |
| metrics     | æ˜¾ç¤ºåº”ç”¨çš„åº¦é‡æ ‡å‡†ä¿¡æ¯                                     |    GET     |

å®Œæ•´ç«¯ç‚¹è¯´æ˜å‚è€ƒï¼š[å®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-boot/docs/2.6.6/reference/htmlsingle/#actuator.endpoints)
